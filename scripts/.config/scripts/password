#!/usr/bin/env bash
# Copys password from pass onto clipboard 
# Requires sway, fzf, pass, wl-clipboard, sed, ripgrep(can be replaced with gnu grep), and bash

cd $HOME/.password-store
PASSFILE=$(tree -Ffi | rg '.gpg' | sed 's/.gpg$//g' | sed 's/^..//' | fzf --color=fg:#F7F7F7,bg:#2b2929,hl:#F7F7F7,fg+:#F7F7F7,bg+:235,hl+:#F7F7F7,bg+:#e95420 --color=info:#2b2929,prompt:#F7F7F7,spinner:#2b2929,pointer:#e95420,marker:#2b2929,gutter:#2b2929 --prompt='Entry: ' --bind='tab:toggle-down,btab:toggle-up' --border --reverse)

if [ -z "$PASSFILE" ]; then
	exit 0
fi

PASSDATA="$(pass $PASSFILE)"
PASS="$(echo "$PASSDATA" | head -n 1)"

swaymsg exec wl-copy $PASS 
